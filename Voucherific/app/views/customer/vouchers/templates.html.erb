<!--This is the view for the new or logged in customer to get a new coupon -->

<div>
    <!-- Greeting to the signed in user. Note this needs fixing when devise is sorted -->
    <h1> Hi <%= current_user.email %>, here are today's deals avaliable to you! </h1> 
        <div>
            <% @templates.each do |template| %>
                <div class="customertemplate">
                    <p><strong> <%= template.description %></strong></p>
                    <p>Value: Â£<%= template.value %>
                    <!-- link which takes user to a page showing the specific coupon details -->
                    
                    <!-- THIS  IS THE BIT WE NEED TO FIGURE OUT. HOW DO WE MAKE A UNIQUE NEW voucher OF THE COUPON
                    WHICH BELONGS THEN TO THE CUSTOMER?!! -->
                    <p> <%= link_to "Get this coupon", {controller: 'vouchers', action: 'custom', id: template.id}, method: :post, class: "btn btn-primary"   %></p>
                
                </div>
            <% end %>
        </div>  

     <p><%= link_to "Back To Homepage", root_path, class: "btn btn-primary" %></p> 