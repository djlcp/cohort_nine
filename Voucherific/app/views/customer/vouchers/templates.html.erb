<!--This is the view for the new or logged in customer to get a new coupon -->

<div class="text-center">
    <h1> Hi <%= current_user.email %>,<br> here are today's deals avaliable to you! </br></h1> 
    
     <% @templates.each do |template| %>
        <div class="container">
        <div class="card-deck mb-3 text-center">
        <div class="card mb-4 shadow-sm">
        <div class="card-header">
            <p><strong> <%= template.description %></strong></p>
        </div>
        <div class="card-body">
             <p>Value: Â£<%= template.value %>
             <!-- link which takes user to a page showing the specific coupon details -->
             
             <!-- THIS  IS THE BIT WE NEED TO FIGURE OUT. HOW DO WE MAKE A UNIQUE NEW voucher OF THE COUPON
             WHICH BELONGS THEN TO THE CUSTOMER?!! -->
             <p> <%= link_to "Get this coupon", {controller: 'vouchers', action: 'custom', id: template.id}, method: :post, class: "btn btn-primary"   %></p>
         </div>
         </div>
     <% end %>
 </div>  
    
     <p><%= link_to "Back To Homepage", root_path, class: "btn btn-primary" %></p> 